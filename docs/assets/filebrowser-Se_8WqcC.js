(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(s){if(s.ep)return;s.ep=!0;const t=i(s);fetch(s.href,t)}})();function V(n){let e={};e:for(;!$(n);){let i=y(n);switch(i>>>3){case 0:break e;case 1:{e.edge_label=M(n,y(n));break}case 2:{let r=F(n);e.child=T(n),n.limit=r;break}default:k(n,i&7)}}return e}function D(n){return T(H(n))}function T(n){let e={};e:for(;!$(n);){let i=y(n);switch(i>>>3){case 0:break e;case 1:{e.size=I(n,!1);break}case 2:{let r=F(n);(e.children||(e.children=[])).push(V(n)),n.limit=r;break}default:k(n,i&7)}}return e}function F(n){let e=y(n),i=n.limit;return n.limit=n.offset+e,i}function k(n,e){switch(e){case 0:for(;m(n)&128;);break;case 2:E(n,y(n));break;case 5:E(n,4);break;case 1:E(n,8);break;default:throw new Error("Unimplemented type: "+e)}}let U=new Float32Array(1);new Uint8Array(U.buffer);let P=new Float64Array(1);new Uint8Array(P.buffer);function H(n){return{bytes:n,offset:0,limit:n.length}}function E(n,e){if(n.offset+e>n.limit)throw new Error("Skip past limit");n.offset+=e}function $(n){return n.offset>=n.limit}function A(n,e){let i=n.offset;if(i+e>n.limit)throw new Error("Read past limit");return n.offset+=e,i}function M(n,e){let i=A(n,e),r=String.fromCharCode,s=n.bytes,t="ÔøΩ",l="";for(let o=0;o<e;o++){let a=s[o+i],h,f,u,c;a&128?(a&224)===192?o+1>=e?l+=t:(h=s[o+i+1],(h&192)!==128?l+=t:(c=(a&31)<<6|h&63,c<128?l+=t:(l+=r(c),o++))):(a&240)==224?o+2>=e?l+=t:(h=s[o+i+1],f=s[o+i+2],((h|f<<8)&49344)!==32896?l+=t:(c=(a&15)<<12|(h&63)<<6|f&63,c<2048||c>=55296&&c<=57343?l+=t:(l+=r(c),o+=2))):(a&248)==240?o+3>=e?l+=t:(h=s[o+i+1],f=s[o+i+2],u=s[o+i+3],((h|f<<8|u<<16)&12632256)!==8421504?l+=t:(c=(a&7)<<18|(h&63)<<12|(f&63)<<6|u&63,c<65536||c>1114111?l+=t:(c-=65536,l+=r((c>>10)+55296,(c&1023)+56320),o+=3))):l+=t:l+=r(a)}return l}function m(n){return n.bytes[A(n,1)]}function y(n){let e=0,i=0,r;do r=m(n),e<32&&(i|=(r&127)<<e),e+=7;while(r&128);return i}function I(n,e){let i=0,r=0,s=0,t;return t=m(n),i=t&127,t&128&&(t=m(n),i|=(t&127)<<7,t&128&&(t=m(n),i|=(t&127)<<14,t&128&&(t=m(n),i|=(t&127)<<21,t&128&&(t=m(n),r=t&127,t&128&&(t=m(n),r|=(t&127)<<7,t&128&&(t=m(n),r|=(t&127)<<14,t&128&&(t=m(n),r|=(t&127)<<21,t&128&&(t=m(n),s=t&127,t&128&&(t=m(n),s|=(t&127)<<7))))))))),{low:i|r<<28,high:r>>>4|s<<24,unsigned:e}}class d{constructor(){this.root={}}static isGzipCompressed(e){return e.toLowerCase().endsWith(".gz")}static async decode(e){const i=new d;return i.root=D(e),i}static async loadFromUrl(e){const i=await fetch(e);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const r=await i.arrayBuffer(),s=new Uint8Array(r);if(d.isGzipCompressed(e))try{const t=new DecompressionStream("gzip"),l=new Blob([s]).stream().pipeThrough(t),a=await(await new Response(l)).arrayBuffer();return d.decode(new Uint8Array(a))}catch(t){throw console.error("Failed to decompress Gzip:",t),t}return d.decode(s)}static getLongSize(e){if(!e)return 0;const i=e.low>>>0,r=e.high>>>0;return Number(BigInt(i)+(BigInt(r)<<32n))}static getNodeSize(e){if(!e)return 0;let i=d.getLongSize(e.size);if(e.children)for(const r of e.children)r.child&&(i+=d.getNodeSize(r.child));return i}getTotalSize(){return d.getNodeSize(this.root)}getTotalFileCount(){let e=0;const i=r=>{if(r.children&&r.children.length>0)for(const s of r.children)s.child&&i(s.child);else e++};return i(this.root),e}getFileTypes(){const e=new Map,i=(r,s)=>{if(r.children&&r.children.length>0)for(const t of r.children)t.child&&i(t.child,s+(t.edge_label||""));else if(s){const t=s.split(".").pop()?.toLowerCase()||"no extension",l=d.getLongSize(r.size),o=e.get(t)||{count:0,size:0};e.set(t,{count:o.count+1,size:o.size+l})}};return i(this.root,""),e}getAllFileTypes(){const e=this.getFileTypes(),i=this.getTotalSize();return Array.from(e.entries()).map(([r,s])=>[r,{...s,percentage:s.size/i*100}]).sort((r,s)=>s[1].size-r[1].size)}static formatSize(e){const i=["B","KB","MB","GB","TB"];let r=e,s=0;for(;r>=1024&&s<i.length-1;)r/=1024,s++;return`${r.toFixed(2)} ${i[s]}`}}class O{constructor(e){if(this.container=document.getElementById(e),!this.container)throw new Error(`Container element with id '${e}' not found`);this.errorDiv=document.createElement("div"),this.errorDiv.id="error",this.container.appendChild(this.errorDiv),this.treeView=document.createElement("div"),this.treeView.id="treeView",this.container.appendChild(this.treeView)}createNodeElement(e,i=""){const r=document.createElement("div");r.className="tree-node";const s=d.getLongSize(e.size),t=document.createElement("div");t.className="node-content";const l=document.createElement("span");if(l.className="node-icon",l.textContent=e.children&&e.children.length>0?"üìÅ":"üìÑ",t.innerHTML=`
            <span class="path">${i||"/"}</span>
            <span class="size">${e.children&&e.children.length>0?`${d.formatSize(d.getNodeSize(e))} total (${e.children.length} items)`:d.formatSize(s)}</span>
        `,t.insertBefore(l,t.firstChild),r.appendChild(t),e.children&&e.children.length>0){const o=document.createElement("div");o.className="node-children hidden";const a=document.createElement("button");a.className="toggle-btn",a.textContent="‚ñ∂",t.insertBefore(a,t.firstChild),a.addEventListener("click",()=>{const h=o.classList.contains("hidden");o.classList.toggle("hidden"),a.textContent=h?"‚ñº":"‚ñ∂",h&&o.children.length===0&&[...e.children||[]].sort((u,c)=>{const C=u.child?.children&&u.child.children.length>0,z=c.child?.children&&c.child.children.length>0;return C===z?0:C?-1:1}).forEach(u=>{if(u.child){const c=i+(u.edge_label||"");o.appendChild(this.createNodeElement(u.child,c))}})}),r.appendChild(o)}return r}async loadUrl(e){if(!e){this.errorDiv.textContent="Please enter a URL";return}this.errorDiv.textContent="",this.treeView.innerHTML="<p>Loading...</p>";try{const i=await d.loadFromUrl(e);this.treeView.innerHTML="";const r=document.createElement("div");r.className="total-size";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center";const t=document.createElement("button");t.className="summary-toggle",t.textContent="Show Breakdown";const l=document.createElement("span"),o=i.getAllFileTypes(),a=i.getTotalFileCount(),h=o.length>0?o[0][0]:"none";if(l.textContent=`Total Size: ${d.formatSize(i.getTotalSize())} | ${a} files | Most common: ${h}`,s.appendChild(t),s.appendChild(l),r.appendChild(s),o.length>0){r.appendChild(document.createElement("br"));const f=document.createElement("table");f.className="file-types-table";const u=f.insertRow();["Type","Size","Files","Percentage"].forEach(p=>{const g=document.createElement("th");g.textContent=p,u.appendChild(g)}),o.forEach(([p,g])=>{const w=f.insertRow(),v=w.insertCell();v.className="file-type",v.textContent=p;const L=w.insertCell();L.className="file-size",L.textContent=d.formatSize(g.size);const B=w.insertCell();B.className="file-count",B.textContent=g.count.toString();const x=w.insertCell();x.className="file-percentage",x.textContent=`${g.percentage.toFixed(1)}%`});const c=f.insertRow();c.className="totals-row";const C=c.insertCell();C.textContent="TOTAL",C.className="file-type";const z=c.insertCell();z.textContent=d.formatSize(i.getTotalSize()),z.className="file-size";const S=c.insertCell();S.textContent=o.reduce((p,[g,w])=>p+w.count,0).toString(),S.className="file-count";const N=c.insertCell();N.textContent="100.0%",N.className="file-percentage",f.style.display="none",r.appendChild(f),t.addEventListener("click",()=>{const p=f.style.display!=="none";f.style.display=p?"none":"",t.textContent=p?"Show Breakdown":"Hide Breakdown"})}this.treeView.appendChild(r),this.treeView.appendChild(this.createNodeElement(i.root))}catch(i){this.treeView.innerHTML=`<p class="error">Error: ${i}</p>`}}}export{O as F};
